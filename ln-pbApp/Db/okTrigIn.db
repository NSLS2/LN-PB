#--------------------------------------------
# FEB. 26, 2021: Manual RF Inhibit should first
# set SDRAM Read Enable to 0 in order to prevent
# SDRAM read (by disabling the qualifier)!
# RESET should be followed by SDRAM REARM!
#
#record(bo,      "$(S1){$(D1)}Trig:InhRF-Cmd") {
#  field(DESC,   "Set RF Inhibit")
#  field(FLNK,   "$(S1){$(D1)}Trig:InhRF")
#}
#
record(seq,      "$(S1){$(D1)}Trig:InhRF-Cmd") {
  field(DESC,    "Clear SDRAM READ qualifier:")
  field(DO1,     "0")
  field(LNK1,    "$(S1){$(D1)-$(SD6)}Enbl:Write PP")
  field(DO2,     "0")
  field(LNK2,    "$(S1){$(D1)-$(SD6)}Enbl:Read PP")
  field(DO3,     "1")
  field(LNK3,    "$(S1){$(D1)-$(SD6)}Rst:Cmd PP")
  field(DO4,     "0")
  field(LNK4,    "$(S1){$(D1)-$(SD6)}DI:Fill-Sts PP")
  field(FLNK,    "$(S1){$(D1)}Trig:InhRF_")
}

record(longout, "$(S1){$(D1)}Trig:InhRF_") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Set RF inhibit!")
  field(VAL,    "9")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP40_09")
}

record(bo,      "$(S1){$(D1)}Rst:InhRF-Cmd") {
  field(DESC,   "Reset RF inhibit")
  field(FLNK,   "$(S1){$(D1)}Rst:InhRF")
}

record(longout, "$(S1){$(D1)}Rst:InhRF") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Reset")
  field(VAL,    "10")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP40_0a")
  field(FLNK,   "$(S1){$(D1)-$(SD6)}State:Arm00")
}

#record(seq,     "$(S1){$(D1)}Enbl:ExtTrig") {
#  field(DO1,    "1")
#  field(LNK1,   "BR-TS{EVR:L1A-Out:FP0}Ena-SP CPP")
#  field(DLY1,   "1")
#}

record(bo,      "$(S1){$(D1)}Trig:AV2-Cmd") {
  field(DESC,   "Set AVAGO2")
  field(FLNK,   "$(S1){$(D1)}Trig:AVAGO2")
}

record(longout, "$(S1){$(D1)}Trig:AVAGO2") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Set AVAGO2!")
  field(VAL,    "4")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_04")
}

record(bo,      "$(S1){$(D1)}Rst:AV2-Cmd") {
  field(DESC,   "Reset AVAGO2")
  field(FLNK,   "$(S1){$(D1)}Rst:AVAGO2")
}

record(longout, "$(S1){$(D1)}Rst:AVAGO2") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Reset")
  field(VAL,    "5")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_05")
}

record(bo,      "$(S1){$(D1)}Trig:SoftTrip-Cmd") {
  field(DESC,   "Set Soft Trip")
  field(FLNK,   "$(S1){$(D1)}Trig:SoftTrip")
}

record(longout, "$(S1){$(D1)}Trig:SoftTrip") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Soft trip!")
  field(VAL,    "1")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP40_01")
}

record(bo,      "$(S1){$(D1)}Rst:SoftTrip-Cmd") {
  field(DESC,   "Reset Soft Trip")
  field(FLNK,   "$(S1){$(D1)}Rst:SoftTrip")
}

record(longout, "$(S1){$(D1)}Rst:SoftTrip") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Reset")
  field(VAL,    "2")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP40_02")
}

record(bo,      "$(S1){$(D1)}Trig:VacTrip-Cmd") {
  field(DESC,   "Set Vacuum Trip")
  field(FLNK,   "$(S1){$(D1)}Trig:VacTrip")
}

record(longout, "$(S1){$(D1)}Trig:VacTrip") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Vacuum Trip!")
  field(VAL,    "0")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_00")
}

record(bo,      "$(S1){$(D1)}Rst:VacTrip-Cmd") {
  field(DESC,   "Reset Vacuum Trip")
  field(FLNK,   "$(S1){$(D1)}Rst:VacTrip")
}

record(longout, "$(S1){$(D1)}Rst:VacTrip") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Reset")
  field(VAL,    "1")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_01")
}

record(bo,      "$(S1){$(D1)}Trig:PPS-Cmd") {
  field(DESC,   "Set PPS Trip")
  field(FLNK,   "$(S1){$(D1)}Trig:PPS")
}

record(longout, "$(S1){$(D1)}Trig:PPS") {
  field(DTYP,   "asynInt32")
  field(DESC,   "PPS Trip!")
  field(VAL,    "2")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_02")
}

record(bo,      "$(S1){$(D1)}Rst:PPS-Cmd") {
  field(DESC,   "Reset PPS")
  field(FLNK,   "$(S1){$(D1)}Rst:PPS")
}

record(longout, "$(S1){$(D1)}Rst:PPS") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Reset")
  field(VAL,    "3")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_03")
}

record(bo,      "$(S1){$(D1)}Trig:Quench-Cmd") {
  field(DESC,   "Set Quench")
  field(FLNK,   "$(S1){$(D1)}Trig:Quench")
}

record(longout, "$(S1){$(D1)}Trig:Quench") {
  field(DTYP,   "asynInt32")
  field(DESC,   "QUENCH!")
  field(VAL,    "13")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP40_0d")
}

record(bo,      "$(S1){$(D1)}Rst:Quench-Cmd") {
  field(DESC,   "Reset Quench")
  field(FLNK,   "$(S1){$(D1)}Rst:Quench")
}

record(longout, "$(S1){$(D1)}Rst:Quench") {
  field(DTYP,   "asynInt32")
  field(DESC,   "Reset")
  field(VAL,    "14")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP40_0e")
}

record(bo,      "$(S1){$(D1)}Trig:CircA-Cmd") {
  field(DESC,   "CircBufSWTripA:")
  field(DTYP,   "asynInt32")
  field(OUT ,   "@asyn($(PORT),0)CircTripA")
  field(ONAM,   "Trip")
}

record(bo,      "$(S1){$(D1)}Trig:CircB-Cmd") {
  field(DESC,   "CircBufSWTripB:")
  field(DTYP,   "asynInt32")
  field(OUT ,   "@asyn($(PORT),0)CircTripB")
  field(ONAM,   "Trip")
}

#--------------------------------------------

record(bo,      "$(S1){$(D1)-$(SD7)}Trig:Next-Cmd") {
  field(DESC,   "TSNext:")
  field(DTYP,   "asynInt32")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_08")
  field(VAL ,   "1")
  field(FLNK,   "$(S1){$(D1)-$(SD7)}Cnt:Nxt1-Calc")
}

record(bo,      "$(S1){$(D1)-$(SD7)}Rst:Cmd") {
  field(DESC,   "TSReset:")
  field(DTYP,   "asynInt32")
  field(OUT ,   "@asyn($(PORT),0)TrigIn:EP41_09")
  field(VAL ,   "1")
}

#--------------------------------------------

record(bo,      "$(S1){$(D1)}Trig:Ramp-Cmd") {
  field(DESC,   "FB ramp trigger")
  field(OUT,    "$(S1){$(D1)}Trig:Ramp PP")
}

record(longout, "$(S1){$(D1)}Trig:Ramp") {
  field(DTYP,   "asynInt32")
  field(OUT ,   "@asyn($(PORT),0)FB RampTrigger")
}
#--------------------------------------------


